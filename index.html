<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MindSupport | Mental Health Community</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
}

:root {
--primary: #4a6fa5;
--secondary: #6b8cbc;
--accent: #ff7e5f;
--light: #f8f9fa;
--dark: #343a40;
--crisis: #e74c3c;
--success: #2ecc71;
--therapy: #9b59b6;
--peer: #3498db;
--community: #1abc9c;
--forum-bg: #f5f7fa;
--ai-bg: #e3f2fd;
--warning: #f39c12;
}

body {
background: linear-gradient(135deg, #e3f2fd 0%, #f0f7ff 100%);
color: #333;
line-height: 1.6;
min-height: 100vh;
position: relative;
}

.crisis-banner {
background-color: var(--crisis);
color: white;
padding: 12px 0;
text-align: center;
font-weight: 600;
position: sticky;
top: 0;
z-index: 1000;
box-shadow: 0 2px 10px rgba(0,0,0,0.1);
}

.crisis-banner a {
color: white;
text-decoration: underline;
margin: 0 8px;
font-weight: 500;
}

header {
background-color: rgba(255, 255, 255, 0.95);
box-shadow: 0 2px 15px rgba(0,0,0,0.08);
position: sticky;
top: 38px;
z-index: 100;
padding: 0 5%;
backdrop-filter: blur(5px);
}

.header-container {
display: flex;
justify-content: space-between;
align-items: center;
padding: 15px 0;
max-width: 1200px;
margin: 0 auto;
}

.logo {
font-size: 28px;
font-weight: 700;
color: var(--primary);
display: flex;
align-items: center;
}

.logo i {
margin-right: 12px;
color: var(--community);
font-size: 32px;
}

nav ul {
display: flex;
list-style: none;
}

nav li {
margin-left: 25px;
}

nav a {
text-decoration: none;
color: var(--dark);
font-weight: 500;
transition: color 0.3s;
display: flex;
align-items: center;
font-size: 17px;
position: relative;
}

nav a::after {
content: '';
position: absolute;
bottom: -5px;
left: 0;
width: 0;
height: 2px;
background: var(--community);
transition: width 0.3s;
}

nav a:hover::after {
width: 100%;
}

nav a i {
margin-right: 8px;
}

.hero {
padding: 100px 5% 80px;
text-align: center;
position: relative;
background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path d="M0,0 Q50,100 100,0 L100,100 Q50,0 0,100 Z" fill="rgba(74, 111, 165, 0.05)"/></svg>') no-repeat bottom;
background-size: cover;
}

.hero-content {
max-width: 800px;
margin: 0 auto;
position: relative;
z-index: 2;
}

.hero h1 {
font-size: 42px;
margin-bottom: 25px;
color: var(--primary);
line-height: 1.2;
}

.hero p {
font-size: 20px;
margin: 0 auto 35px;
color: #444;
max-width: 700px;
}

.btn {
display: inline-block;
background: linear-gradient(135deg, var(--community) 0%, var(--primary) 100%);
color: white;
padding: 15px 32px;
border: none;
border-radius: 50px;
cursor: pointer;
font-weight: 600;
transition: all 0.3s;
text-decoration: none;
font-size: 17px;
box-shadow: 0 5px 15px rgba(26, 188, 156, 0.3);
}

.btn:hover {
transform: translateY(-3px);
box-shadow: 0 8px 20px rgba(26, 188, 156, 0.4);
}

.btn-secondary {
background: linear-gradient(135deg, var(--peer) 0%, var(--secondary) 100%);
box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
}

.btn-warning {
background: linear-gradient(135deg, var(--warning) 0%, #e67e22 100%);
box-shadow: 0 5px 15px rgba(243, 156, 18, 0.3);
}

.services {
padding: 80px 5%;
background-color: white;
}

.section-title {
text-align: center;
margin-bottom: 50px;
color: var(--primary);
position: relative;
font-size: 36px;
}

.section-title::after {
content: "";
display: block;
width: 100px;
height: 5px;
background: var(--community);
margin: 15px auto;
border-radius: 3px;
}

.services-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 35px;
max-width: 1200px;
margin: 0 auto;
}

.service-card {
background: white;
border-radius: 15px;
overflow: hidden;
box-shadow: 0 10px 25px rgba(0,0,0,0.08);
transition: transform 0.3s, box-shadow 0.3s;
position: relative;
border: 1px solid #e9ecef;
}

.service-card:hover {
transform: translateY(-10px);
box-shadow: 0 15px 30px rgba(0,0,0,0.15);
}

.service-card.therapy {
border-top: 5px solid var(--therapy);
}

.service-card.peer {
border-top: 5px solid var(--peer);
}

.service-card.community {
border-top: 5px solid var(--community);
}

.service-content {
padding: 30px;
}

.service-icon {
font-size: 48px;
margin-bottom: 25px;
display: inline-block;
width: 90px;
height: 90px;
line-height: 90px;
text-align: center;
border-radius: 50%;
background: rgba(26, 188, 156, 0.1);
color: var(--community);
}

.service-card h3 {
margin-bottom: 20px;
color: var(--primary);
font-size: 26px;
}

.service-card p {
margin-bottom: 25px;
color: #555;
font-size: 17px;
}

.community-section {
padding: 80px 5%;
background-color: var(--forum-bg);
}

.forum-container {
max-width: 1000px;
margin: 0 auto;
background: white;
border-radius: 15px;
overflow: hidden;
box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.forum-header {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
padding: 25px;
text-align: center;
}

.community-stats {
display: flex;
justify-content: center;
gap: 30px;
margin-top: 15px;
font-size: 14px;
opacity: 0.9;
}

.community-stats span {
display: flex;
align-items: center;
gap: 5px;
}

.forum-posts {
padding: 30px;
min-height: 300px;
max-height: 600px;
overflow-y: auto;
}

.empty-community {
display: flex;
align-items: center;
justify-content: center;
flex-direction: column;
text-align: center;
color: #777;
height: 200px;
}

.empty-community i {
font-size: 60px;
margin-bottom: 20px;
color: var(--community);
}

.post-item {
background: #f8f9fa;
border-radius: 12px;
padding: 20px;
margin-bottom: 20px;
box-shadow: 0 3px 10px rgba(0,0,0,0.05);
transition: all 0.3s ease;
border-left: 4px solid var(--community);
position: relative;
}

.post-item:hover {
transform: translateY(-2px);
box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.post-header {
display: flex;
justify-content: between;
align-items: center;
margin-bottom: 15px;
flex-wrap: wrap;
gap: 10px;
}

.post-author {
display: flex;
align-items: center;
gap: 10px;
}

.author-avatar {
width: 40px;
height: 40px;
border-radius: 50%;
background: var(--community);
display: flex;
align-items: center;
justify-content: center;
color: white;
font-weight: 600;
}

.post-info {
flex: 1;
}

.post-author-name {
font-weight: 600;
color: var(--primary);
}

.post-meta {
font-size: 13px;
color: #666;
}

.version-badge {
background: var(--warning);
color: white;
padding: 3px 8px;
border-radius: 12px;
font-size: 11px;
font-weight: 600;
}

.warning-badge {
background: var(--crisis);
color: white;
padding: 4px 8px;
border-radius: 15px;
font-size: 12px;
font-weight: 600;
margin-left: 10px;
}

.post-title {
font-size: 18px;
font-weight: 600;
color: var(--primary);
margin-bottom: 10px;
}

.post-content {
color: #555;
line-height: 1.6;
margin-bottom: 15px;
}

.post-actions {
display: flex;
gap: 15px;
align-items: center;
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid #e9ecef;
flex-wrap: wrap;
}

.action-btn {
background: none;
border: none;
color: #666;
cursor: pointer;
font-size: 14px;
display: flex;
align-items: center;
gap: 5px;
padding: 5px 10px;
border-radius: 20px;
transition: all 0.3s;
}

.action-btn:hover {
background: var(--light);
color: var(--primary);
}

.action-btn.liked {
color: var(--crisis);
}

.action-btn.liked:hover {
background: rgba(231, 76, 60, 0.1);
}

.action-btn.delete {
color: #e74c3c;
}

.action-btn.delete:hover {
background: rgba(231, 76, 60, 0.1);
}

.reply-section {
margin-top: 15px;
padding-top: 15px;
border-top: 1px solid #e9ecef;
display: none;
}

.reply-input {
display: flex;
gap: 10px;
margin-bottom: 15px;
}

.reply-input input {
flex: 1;
padding: 10px 15px;
border: 1px solid #ddd;
border-radius: 25px;
font-size: 14px;
}

.reply-input button {
padding: 10px 20px;
}

.replies {
margin-left: 20px;
}

.reply-item {
background: white;
padding: 15px;
border-radius: 8px;
margin-bottom: 10px;
border-left: 3px solid var(--peer);
}

.new-post-form {
padding: 30px;
background: white;
border-top: 1px solid #eee;
}

.new-post-form h3 {
margin-bottom: 20px;
color: var(--primary);
}

.form-group {
margin-bottom: 20px;
}

.form-group input,
.form-group textarea {
width: 100%;
padding: 15px;
border: 1px solid #ddd;
border-radius: 8px;
font-size: 16px;
}

.form-group textarea {
height: 150px;
resize: vertical;
}

.checkbox-label {
display: flex;
align-items: center;
gap: 10px;
cursor: pointer;
font-size: 14px;
color: #666;
}

.checkbox-label input[type="checkbox"] {
width: auto;
margin: 0;
}

/* Modal Styles */
.modal {
display: none;
position: fixed;
z-index: 2000;
left: 0;
top: 0;
width: 100%;
height: 100%;
background-color: rgba(0,0,0,0.5);
backdrop-filter: blur(3px);
}

.modal-content {
background-color: white;
margin: 5% auto;
padding: 0;
border-radius: 15px;
width: 90%;
max-width: 600px;
max-height: 80vh;
overflow: hidden;
box-shadow: 0 20px 40px rgba(0,0,0,0.3);
}

.modal-header {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
padding: 20px;
display: flex;
justify-content: space-between;
align-items: center;
}

.modal-header h3 {
margin: 0;
font-size: 20px;
}

.close {
color: white;
font-size: 28px;
font-weight: bold;
cursor: pointer;
line-height: 1;
}

.close:hover {
opacity: 0.7;
}

.modal-body {
padding: 20px;
max-height: 400px;
overflow-y: auto;
}

.version-item {
background: #f8f9fa;
border-radius: 8px;
padding: 15px;
margin-bottom: 15px;
border-left: 4px solid var(--warning);
}

.version-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 10px;
}

.version-number {
font-weight: 600;
color: var(--primary);
}

.version-date {
font-size: 12px;
color: #666;
}

.current-version {
background: var(--success);
color: white;
padding: 2px 8px;
border-radius: 10px;
font-size: 11px;
}

.chat-messages {
height: 300px;
overflow-y: auto;
border: 1px solid #eee;
border-radius: 8px;
padding: 15px;
margin-bottom: 15px;
background: #f8f9fa;
}

.chat-message {
margin-bottom: 15px;
display: flex;
gap: 10px;
}

.chat-message.own {
justify-content: flex-end;
}

.chat-message.own .message-bubble {
background: var(--peer);
color: white;
}

.message-bubble {
background: white;
padding: 10px 15px;
border-radius: 18px;
max-width: 70%;
box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.chat-input {
display: flex;
gap: 10px;
}

.chat-input input {
flex: 1;
padding: 12px 15px;
border: 1px solid #ddd;
border-radius: 25px;
}

.chat-input button {
padding: 12px 20px;
border: none;
background: var(--peer);
color: white;
border-radius: 25px;
cursor: pointer;
}

.policies-section {
padding: 80px 5%;
background: white;
}

.policies-container {
max-width: 1000px;
margin: 0 auto;
}

.policy-card {
background: white;
border-radius: 15px;
padding: 40px;
margin-bottom: 40px;
box-shadow: 0 10px 30px rgba(0,0,0,0.08);
border-left: 5px solid var(--community);
}

.policy-card h3 {
margin-bottom: 20px;
color: var(--primary);
font-size: 28px;
display: flex;
align-items: center;
}

.policy-card h3 i {
margin-right: 15px;
color: var(--community);
}

.policy-content {
line-height: 1.8;
color: #555;
}

.policy-content ul {
margin: 20px 0 20px 30px;
}

.policy-content li {
margin-bottom: 10px;
}

.contact-section {
padding: 80px 5%;
background: var(--forum-bg);
text-align: center;
}

.contact-info {
max-width: 600px;
margin: 0 auto;
padding: 40px;
background: white;
border-radius: 15px;
box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.contact-icon {
font-size: 48px;
color: var(--community);
margin-bottom: 20px;
}

.contact-info h2 {
margin-bottom: 20px;
color: var(--primary);
}

.phone-number {
font-size: 32px;
font-weight: 700;
color: var(--community);
margin: 20px 0;
display: block;
}

.email-contact {
font-size: 24px;
font-weight: 600;
color: var(--primary);
margin: 20px 0;
display: block;
}

.contact-text {
font-size: 18px;
color: #555;
margin-bottom: 30px;
}

footer {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
padding: 60px 5% 30px;
text-align: center;
}

.footer-content {
max-width: 1200px;
margin: 0 auto;
display: grid;
grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
gap: 40px;
margin-bottom: 40px;
}

.footer-section h3 {
margin-bottom: 20px;
color: white;
font-size: 22px;
position: relative;
padding-bottom: 10px;
}

.footer-section h3::after {
content: "";
position: absolute;
bottom: 0;
left: 50%;
transform: translateX(-50%);
width: 50px;
height: 3px;
background-color: var(--community);
}

.footer-links {
list-style: none;
}

.footer-links li {
margin-bottom: 12px;
}

.footer-links a {
color: rgba(255,255,255,0.8);
text-decoration: none;
transition: color 0.3s;
font-size: 16px;
}

.footer-links a:hover {
color: white;
}

.copyright {
text-align: center;
padding-top: 30px;
border-top: 1px solid rgba(255,255,255,0.2);
color: rgba(255,255,255,0.7);
font-size: 15px;
max-width: 1200px;
margin: 0 auto;
}

/* AI Assistant */
.ai-assistant {
position: fixed;
bottom: 30px;
right: 30px;
z-index: 1000;
}

.ai-toggle {
width: 70px;
height: 70px;
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
color: white;
font-size: 28px;
box-shadow: 0 8px 25px rgba(0,0,0,0.2);
cursor: pointer;
transition: all 0.3s;
}

.ai-toggle:hover {
transform: scale(1.1) rotate(10deg);
box-shadow: 0 12px 30px rgba(0,0,0,0.3);
}

.ai-toggle.has-notification::after {
content: '';
position: absolute;
top: 8px;
right: 8px;
width: 12px;
height: 12px;
background: var(--crisis);
border-radius: 50%;
border: 2px solid white;
}

.ai-chat-box {
width: 380px;
height: 550px;
background: white;
border-radius: 20px;
box-shadow: 0 15px 40px rgba(0,0,0,0.2);
display: none;
flex-direction: column;
overflow: hidden;
position: absolute;
bottom: 85px;
right: 0;
}

.ai-header {
background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
color: white;
padding: 20px;
text-align: center;
font-size: 18px;
font-weight: 600;
}

.ai-status {
font-size: 12px;
opacity: 0.9;
margin-top: 5px;
}

.ai-messages {
flex: 1;
padding: 20px;
overflow-y: auto;
display: flex;
flex-direction: column;
gap: 15px;
background: var(--ai-bg);
}

.message {
max-width: 85%;
padding: 12px 16px;
border-radius: 18px;
font-size: 14px;
line-height: 1.4;
animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}

.ai-message {
background: white;
align-self: flex-start;
border-bottom-left-radius: 5px;
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
border-left: 3px solid var(--community);
}

.user-message {
background: var(--peer);
color: white;
align-self: flex-end;
border-bottom-right-radius: 5px;
}

.typing-indicator {
background: white;
align-self: flex-start;
border-bottom-left-radius: 5px;
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
border-left: 3px solid var(--warning);
}

.typing-dots {
display: flex;
gap: 4px;
}

.typing-dots span {
width: 8px;
height: 8px;
border-radius: 50%;
background: var(--warning);
animation: typing 1.4s infinite;
}

.typing-dots span:nth-child(2) {
animation-delay: 0.2s;
}

.typing-dots span:nth-child(3) {
animation-delay: 0.4s;
}

@keyframes typing {
0%, 60%, 100% { transform: translateY(0); }
30% { transform: translateY(-10px); }
}

.ai-input {
display: flex;
padding: 15px;
background: #f8f9fa;
border-top: 1px solid #eee;
gap: 10px;
}

.ai-input input {
flex: 1;
padding: 12px 15px;
border: 1px solid #ddd;
border-radius: 25px;
font-size: 14px;
outline: none;
}

.ai-input button {
background: var(--primary);
color: white;
border: none;
border-radius: 50%;
width: 45px;
height: 45px;
cursor: pointer;
font-size: 16px;
transition: all 0.3s;
}

.ai-input button:hover {
background: var(--secondary);
transform: scale(1.05);
}

.ai-input button:disabled {
background: #ccc;
cursor: not-allowed;
transform: none;
}

.quick-actions {
display: flex;
gap: 8px;
margin-bottom: 10px;
flex-wrap: wrap;
}

.quick-action {
background: rgba(74, 111, 165, 0.1);
color: var(--primary);
padding: 6px 12px;
border-radius: 15px;
font-size: 12px;
cursor: pointer;
transition: all 0.3s;
border: 1px solid rgba(74, 111, 165, 0.2);
}

.quick-action:hover {
background: var(--primary);
color: white;
}

/* Delete Confirmation Modal */
#deleteConfirmationModal .modal-content {
max-width: 450px;
}

#deleteConfirmationModal .modal-body {
text-align: center;
padding: 30px;
}

#deleteConfirmationModal .confirmation-icon {
font-size: 60px;
color: #e74c3c;
margin-bottom: 20px;
}

#deleteConfirmationModal .confirmation-text {
font-size: 18px;
margin-bottom: 25px;
line-height: 1.6;
}

#deleteConfirmationModal .confirmation-actions {
display: flex;
gap: 15px;
justify-content: center;
}

@media (max-width: 768px) {
.header-container {
flex-direction: column;
}

nav ul {
margin-top: 20px;
flex-wrap: wrap;
justify-content: center;
}

nav li {
margin: 8px 15px;
}

.hero h1 {
font-size: 32px;
}

.hero p {
font-size: 18px;
}

.phone-number, .email-contact {
font-size: 24px;
}

.ai-chat-box {
width: 320px;
height: 500px;
right: -10px;
}

.community-stats {
flex-direction: column;
gap: 10px;
}

.post-actions {
flex-wrap: wrap;
}

.modal-content {
width: 95%;
margin: 10% auto;
}

#deleteConfirmationModal .confirmation-actions {
flex-direction: column;
}
}

@media (max-width: 480px) {
.ai-chat-box {
width: 300px;
height: 450px;
bottom: 85px;
right: -20px;
}

.post-header {
flex-direction: column;
align-items: flex-start;
}
}
</style>
</head>
<body>
<!-- Crisis Banner -->
<div class="crisis-banner">
<i class="fas fa-exclamation-circle"></i> In crisis? Call <a href="tel:988">988 Suicide & Crisis Lifeline</a> | 
Text <a href="sms:741741">HOME to 741741</a> | 
International: <a href="tel:+1-800-273-8255">+1-800-273-TALK</a>
</div>

<!-- Header -->
<header>
<div class="header-container">
<div class="logo"><i class="fas fa-hands-helping"></i>MindSupport</div>
<nav>
<ul>
<li><a href="#home"><i class="fas fa-home"></i> Home</a></li>
<li><a href="#community"><i class="fas fa-users"></i> Community</a></li>
<li><a href="#policies"><i class="fas fa-shield-alt"></i> Guidelines</a></li>
<li><a href="#contact"><i class="fas fa-phone"></i> Contact</a></li>
</ul>
</nav>
</div>
</header>

<!-- Hero Section -->
<section id="home" class="hero">
<div class="hero-content">
<h1>Find Support in Our Caring Community</h1>
<p>Share your experiences, connect with others, and find understanding in a safe, supportive environment with advanced conversation versioning.</p>
<a href="#community" class="btn">Join Our Community</a>
</div>
</section>

<!-- Community Section -->
<section id="community" class="community-section">
<h2 class="section-title">Community Support Forum</h2>
<div class="forum-container">
<div class="forum-header">
<h2><i class="fas fa-comments"></i> Share Your Story & Find Support</h2>
<p>Join our compassionate community of individuals supporting each other</p>
<div class="community-stats">
<span><i class="fas fa-users"></i> <span id="memberCount">127</span> Active Members</span>
<span><i class="fas fa-comments"></i> <span id="postCount">0</span> Posts Today</span>
<span><i class="fas fa-history"></i> Version Control Enabled</span>
</div>
</div>

<div class="forum-posts" id="forumPosts">
<div class="empty-community" id="emptyCommunity">
<i class="fas fa-comment-slash"></i>
<h3>Be the first to share your experience</h3>
<p>Your story can help others feel less alone. Start the conversation.</p>
</div>
</div>

<div class="new-post-form">
<h3><i class="fas fa-pen"></i> Share Your Experience</h3>
<form id="communityForm">
<div class="form-group">
<input type="text" id="postTitle" placeholder="Title of your post" required>
</div>
<div class="form-group">
<textarea id="postContent" placeholder="Share your thoughts, experiences, or ask for support..." required></textarea>
</div>
<div class="form-group">
<label class="checkbox-label">
<input type="checkbox" id="triggerWarning">
<span class="checkmark"></span>
This post contains sensitive content (trigger warning)
</label>
</div>
<button type="submit" class="btn">Post to Community</button>
</form>
</div>
</div>

<!-- Version History Modal -->
<div id="versionModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3>Post Version History</h3>
<span class="close" onclick="closeVersionModal()">&times;</span>
</div>
<div class="modal-body" id="versionHistory">
<!-- Version history will be populated here -->
</div>
</div>
</div>

<!-- Delete Confirmation Modal -->
<div id="deleteConfirmationModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3>Delete Post Confirmation</h3>
<span class="close" onclick="closeDeleteModal()">&times;</span>
</div>
<div class="modal-body">
<div class="confirmation-icon">
<i class="fas fa-exclamation-triangle"></i>
</div>
<p class="confirmation-text" id="confirmationMessage">
Are you sure you want to delete this post?<br>
This action cannot be undone.
</p>
<div class="confirmation-actions">
<button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
<button class="btn btn-warning" id="confirmDeleteBtn">Delete Permanently</button>
</div>
</div>
</div>
</div>

<!-- User Chat Modal -->
<div id="chatModal" class="modal">
<div class="modal-content">
<div class="modal-header">
<h3 id="chatUserName">Private Chat</h3>
<span class="close" onclick="closeChatModal()">&times;</span>
</div>
<div class="modal-body">
<div class="chat-messages" id="chatMessages">
<div class="chat-message">
<div class="message-bubble">
Hello! Thanks for reaching out. How can I support you today?
</div>
</div>
</div>
<div class="chat-input">
<input type="text" id="chatInput" placeholder="Type your message...">
<button onclick="sendChatMessage()"><i class="fas fa-paper-plane"></i></button>
</div>
</div>
</div>
</div>
</section>

<!-- Policies Section -->
<section id="policies" class="policies-section">
<h2 class="section-title">Community Guidelines & Safety</h2>
<div class="policies-container">
<div class="policy-card">
<h3><i class="fas fa-book"></i> Community Guidelines</h3>
<div class="policy-content">
<p>Our community is built on mutual respect and support. To maintain a safe environment, we ask all members to follow these guidelines:</p>
<ul>
<li><strong>Be respectful and kind</strong> - Treat others with compassion and understanding</li>
<li><strong>Maintain confidentiality</strong> - Do not share others' personal stories outside this community</li>
<li><strong>Share from your own experience</strong> - Avoid giving medical or professional advice</li>
<li><strong>No harassment or discrimination</strong> - We have zero tolerance for any form of hate speech</li>
<li><strong>Use trigger warnings</strong> - When discussing sensitive topics, use content warnings</li>
<li><strong>Respect boundaries</strong> - Do not pressure others to share more than they're comfortable with</li>
</ul>
<p>Violations of these guidelines may result in temporary suspension or permanent removal from the community.</p>
</div>
</div>

<div class="policy-card">
<h3><i class="fas fa-shield-alt"></i> Safety Policies</h3>
<div class="policy-content">
<p>Your safety is our top priority. Our platform includes these safety measures:</p>
<ul>
<li><strong>24/7 moderation</strong> - Our team monitors the community around the clock</li>
<li><strong>Reporting system</strong> - Easily report concerning content with our reporting tools</li>
<li><strong>Privacy controls</strong> - Choose what personal information you share</li>
<li><strong>Crisis resources</strong> - Immediate access to emergency contacts when needed</li>
<li><strong>Anonymity options</strong> - Participate using a pseudonym if preferred</li>
<li><strong>Content review</strong> - All posts are reviewed before becoming public</li>
</ul>
<p>If you feel unsafe or encounter concerning behavior, please report it immediately using our reporting tools.</p>
</div>
</div>
</div>
</section>

<!-- Contact Section -->
<section id="contact" class="contact-section">
<h2 class="section-title">Get In Touch</h2>
<div class="contact-info">
<div class="contact-icon">
<i class="fas fa-phone-alt"></i>
</div>
<h2>We're Here to Help</h2>
<p class="contact-text">Reach out to us anytime for support, questions, or guidance on your mental health journey.</p>

<a href="tel:59582902" class="phone-number">
<i class="fas fa-phone"></i> 5958 2902
</a>

<a href="mailto:224173@ais.edu.hk" class="email-contact">
<i class="fas fa-envelope"></i> 224173@ais.edu.hk
</a>

<p>Monday - Friday: 9am - 6pm<br>Saturday: 10am - 4pm</p>
</div>
</section>

<!-- Footer -->
<footer>
<div class="footer-content">
<div class="footer-section">
<h3>MindSupport</h3>
<p>Providing compassionate mental health support through community connection.</p>
<p style="margin-top: 15px;">
<i class="fas fa-envelope"></i> 224173@ais.edu.hk<br>
<i class="fas fa-phone"></i> 5958 2902
</p>
</div>

<div class="footer-section">
<h3>Quick Links</h3>
<ul class="footer-links">
<li><a href="#home">Home</a></li>
<li><a href="#community">Community</a></li>
<li><a href="#policies">Guidelines</a></li>
<li><a href="#contact">Contact</a></li>
</ul>
</div>

<div class="footer-section">
<h3>Resources</h3>
<ul class="footer-links">
<li><a href="#">Crisis Resources</a></li>
<li><a href="#">Mental Health Tips</a></li>
<li><a href="#">Therapist Directory</a></li>
<li><a href="#">Self-Care Tools</a></li>
</ul>
</div>

<div class="footer-section">
<h3>Connect</h3>
<ul class="footer-links">
<li><a href="#"><i class="fab fa-facebook"></i> Facebook</a></li>
<li><a href="#"><i class="fab fa-twitter"></i> Twitter</a></li>
<li><a href="#"><i class="fab fa-instagram"></i> Instagram</a></li>
<li><a href="#"><i class="fab fa-youtube"></i> YouTube</a></li>
</ul>
</div>
</div>

<div class="copyright">
<p>&copy; 2023 MindSupport Mental Health Community. All rights reserved.</p>
<p>If you're in crisis, please call emergency services immediately.</p>
</div>
</footer>

<!-- AI Assistant -->
<div class="ai-assistant">
<div class="ai-toggle" id="aiToggle">
<i class="fas fa-robot"></i>
</div>

<div class="ai-chat-box" id="aiChatBox">
<div class="ai-header">
MindSupport AI Assistant
<div class="ai-status">🟢 Online & Ready to Help</div>
</div>
<div class="ai-messages" id="aiMessages">
<div class="message ai-message">
Hello! I'm your advanced MindSupport assistant. I'm here to help with mental health resources, community support, and crisis intervention. 🤗
</div>
<div class="quick-actions">
<div class="quick-action" data-action="crisis">🆘 Crisis Help</div>
<div class="quick-action" data-action="community">👥 Community Guide</div>
<div class="quick-action" data-action="resources">📚 Resources</div>
<div class="quick-action" data-action="anonymous">🔒 Anonymous Support</div>
</div>
</div>
<div class="ai-input">
<input type="text" id="userInput" placeholder="Type your message...">
<button id="sendMessage"><i class="fas fa-paper-plane"></i></button>
</div>
</div>
</div>

<script>
// Global Variables
let posts = [];
let postVersions = {};
let currentUser = 'You';
let postIdCounter = 1;
let isAIThinking = false;
let postToDelete = null;

// IndexedDB for persistent storage
let db;
const dbName = 'MindSupportDB';
const dbVersion = 1;

// Initialize IndexedDB
function initDB() {
return new Promise((resolve, reject) => {
const request = indexedDB.open(dbName, dbVersion);

request.onerror = () => {
console.error('Failed to open IndexedDB');
// Initialize with sample data if DB fails
initializeSampleData();
resolve(false);
};

request.onsuccess = (event) => {
db = event.target.result;
console.log('IndexedDB opened successfully');
loadPostsFromDB();
resolve(true);
};

request.onupgradeneeded = (event) => {
db = event.target.result;

// Create posts store
if (!db.objectStoreNames.contains('posts')) {
const postsStore = db.createObjectStore('posts', { keyPath: 'id' });
postsStore.createIndex('timestamp', 'timestamp', { unique: false });
}

// Create post versions store
if (!db.objectStoreNames.contains('postVersions')) {
const versionsStore = db.createObjectStore('postVersions', { keyPath: 'postId' });
}

// Create metadata store for counters
if (!db.objectStoreNames.contains('metadata')) {
const metaStore = db.createObjectStore('metadata', { keyPath: 'key' });
}
};
});
}

// Save posts to IndexedDB
function savePostsToDB() {
if (!db) return;

const transaction = db.transaction(['posts', 'postVersions', 'metadata'], 'readwrite');
const postsStore = transaction.objectStore('posts');
const versionsStore = transaction.objectStore('postVersions');
const metaStore = transaction.objectStore('metadata');

// Clear existing data
postsStore.clear();
versionsStore.clear();

// Save all posts
posts.forEach(post => {
postsStore.add(post);
});

// Save post versions
Object.keys(postVersions).forEach(postId => {
versionsStore.add({
postId: parseInt(postId),
versions: postVersions[postId]
});
});

// Save metadata
metaStore.put({ key: 'postIdCounter', value: postIdCounter });
}

// Load posts from IndexedDB
function loadPostsFromDB() {
if (!db) {
initializeSampleData();
return;
}

const transaction = db.transaction(['posts', 'postVersions', 'metadata'], 'readonly');
const postsStore = transaction.objectStore('posts');
const versionsStore = transaction.objectStore('postVersions');
const metaStore = transaction.objectStore('metadata');

// Load posts
const postsRequest = postsStore.getAll();
postsRequest.onsuccess = () => {
posts = postsRequest.result.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
if (posts.length === 0) {
initializeSampleData();
}
updatePostCount();
renderPosts();
};

// Load post versions
const versionsRequest = versionsStore.getAll();
versionsRequest.onsuccess = () => {
postVersions = {};
versionsRequest.result.forEach(item => {
postVersions[item.postId] = item.versions;
});
};

// Load metadata
const metaRequest = metaStore.get('postIdCounter');
metaRequest.onsuccess = () => {
if (metaRequest.result) {
postIdCounter = metaRequest.result.value;
} else {
postIdCounter = posts.length > 0 ? Math.max(...posts.map(p => p.id)) + 1 : 1;
}
};
}

// Initialize with sample data if no posts exist
function initializeSampleData() {
if (posts.length === 0) {
const samplePosts = [
{
id: 1,
title: "Finding Hope in Small Moments",
content: "Today I realized that recovery isn't about grand gestures. It's about noticing the warmth of morning coffee, the sound of birds, or a friend's text. These tiny moments are building blocks of healing. What small moment brought you joy today?",
author: "Sarah M.",
triggerWarning: false,
timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000), // 2 hours ago
version: 1,
likes: 12,
replies: [
{
id: 101,
author: "Alex K.",
content: "Thank you for sharing this. I needed to hear it today. The sunset through my window was beautiful.",
timestamp: new Date(Date.now() - 1 * 60 * 60 * 1000)
}
]
},
{
id: 2,
title: "Anxiety Management Techniques That Actually Work",
content: "After years of struggling with anxiety, I've found some techniques that genuinely help me cope. The 5-4-3-2-1 grounding technique (5 things you see, 4 you hear, 3 you touch, 2 you smell, 1 you taste) has been a game-changer during panic attacks. Progressive muscle relaxation before bed helps too. What works for you?",
author: "Michael R.",
triggerWarning: false,
timestamp: new Date(Date.now() - 4 * 60 * 60 * 1000), // 4 hours ago
version: 1,
likes: 23,
replies: [
{
id: 201,
author: "Emma L.",
content: "The box breathing technique (4-4-4-4) has been my lifesaver. Inhale 4, hold 4, exhale 4, hold 4.",
timestamp: new Date(Date.now() - 3 * 60 * 60 * 1000)
},
{
id: 202,
author: "David T.",
content: "Thank you for sharing! I've been struggling with panic attacks lately. Going to try the 5-4-3-2-1 technique.",
timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000)
}
]
},
{
id: 3,
title: "Navigating Depression During the Holidays",
content: "The holidays can be especially challenging when you're dealing with depression. The pressure to be joyful when you're struggling feels overwhelming. I'm learning it's okay to set boundaries, skip events that drain me, and create my own traditions. Remember: your mental health comes first.",
author: "Jordan P.",
triggerWarning: true,
timestamp: new Date(Date.now() - 6 * 60 * 60 * 1000), // 6 hours ago
version: 1,
likes: 18,
replies: []
}
];

posts = samplePosts;
postIdCounter = 4;

// Initialize post versions
samplePosts.forEach(post => {
postVersions[post.id] = [post];
});

updatePostCount();
renderPosts();
}
}

// Community Forum Functionality
document.getElementById('communityForm').addEventListener('submit', function(e) {
e.preventDefault();

const title = document.getElementById('postTitle').value;
const content = document.getElementById('postContent').value;
const triggerWarning = document.getElementById('triggerWarning').checked;

if (title.trim() && content.trim()) {
createNewPost(title, content, triggerWarning);
this.reset();
showNotification('Your experience has been shared successfully!', 'success');
}
});

function createNewPost(title, content, triggerWarning) {
const postId = postIdCounter++;
const newPost = {
id: postId,
title: title,
content: content,
author: currentUser,
triggerWarning: triggerWarning,
timestamp: new Date(),
version: 1,
likes: Math.floor(Math.random() * 15),
replies: []
};

posts.unshift(newPost);
postVersions[postId] = [newPost];

// Save to IndexedDB
savePostsToDB();

updatePostCount();
renderPosts();

// Hide empty community message
document.getElementById('emptyCommunity').style.display = 'none';
}

function renderPosts() {
const container = document.getElementById('forumPosts');
const emptyMessage = document.getElementById('emptyCommunity');

if (posts.length === 0) {
emptyMessage.style.display = 'flex';
return;
} else {
emptyMessage.style.display = 'none';
}

// Clear existing posts except empty message
const existingPosts = container.querySelectorAll('.post-item');
existingPosts.forEach(post => post.remove());

posts.forEach(post => {
const postElement = createPostElement(post);
container.appendChild(postElement);
});
}

function createPostElement(post) {
const postDiv = document.createElement('div');
postDiv.className = 'post-item';
postDiv.innerHTML = `
<div class="post-header">
<div class="post-author">
<div class="author-avatar">${post.author.charAt(0)}</div>
<div class="post-info">
<div class="post-author-name">${post.author}</div>
<div class="post-meta">
${formatTime(post.timestamp)} • Version ${post.version}
<span class="version-badge">v${post.version}</span>
${post.triggerWarning ? '<span class="warning-badge">⚠️ Trigger Warning</span>' : ''}
</div>
</div>
</div>
<button class="action-btn" onclick="showVersionHistory(${post.id})" title="View Version History">
<i class="fas fa-history"></i>
</button>
</div>
<div class="post-title">${post.title}</div>
<div class="post-content">${post.content}</div>
<div class="post-actions">
<button class="action-btn" onclick="toggleLike(${post.id})">
<i class="fas fa-heart"></i> <span id="likes-${post.id}">${post.likes}</span>
</button>
<button class="action-btn" onclick="toggleReply(${post.id})">
<i class="fas fa-comment"></i> Reply
</button>
<button class="action-btn" onclick="editPost(${post.id})">
<i class="fas fa-edit"></i> Edit
</button>
<button class="action-btn" onclick="openPrivateChat('${post.author}')">
<i class="fas fa-envelope"></i> Message
</button>
<button class="action-btn" onclick="reportPost(${post.id})">
<i class="fas fa-flag"></i> Report
</button>
${post.author === currentUser ? 
`<button class="action-btn delete" onclick="confirmDeletePost(${post.id})" title="Delete this post">
  <i class="fas fa-trash"></i> Delete
</button>` : ''
}
</div>
<div class="reply-section" id="reply-${post.id}">
<div class="reply-input">
<input type="text" placeholder="Write a supportive reply..." id="reply-input-${post.id}">
<button class="btn btn-secondary" onclick="addReply(${post.id})">Reply</button>
</div>
<div class="replies" id="replies-${post.id}">
${post.replies.map(reply => `
<div class="reply-item">
<div class="post-author">
<div class="author-avatar">${reply.author.charAt(0)}</div>
<div class="post-info">
<div class="post-author-name">${reply.author}</div>
<div class="post-meta">${formatTime(reply.timestamp)}</div>
</div>
</div>
<div>${reply.content}</div>
</div>
`).join('')}
</div>
</div>
`;
return postDiv;
}

function toggleLike(postId) {
const post = posts.find(p => p.id === postId);
if (post) {
post.likes++;
document.getElementById(`likes-${postId}`).textContent = post.likes;
const btn = event.target.closest('.action-btn');
btn.classList.add('liked');
setTimeout(() => btn.classList.remove('liked'), 2000);
savePostsToDB();
}
}

function toggleReply(postId) {
const replySection = document.getElementById(`reply-${postId}`);
replySection.style.display = replySection.style.display === 'block' ? 'none' : 'block';
}

function addReply(postId) {
const input = document.getElementById(`reply-input-${postId}`);
const content = input.value.trim();
if (content) {
const post = posts.find(p => p.id === postId);
if (post) {
const reply = {
id: Date.now(),
author: currentUser,
content: content,
timestamp: new Date()
};
post.replies.push(reply);
input.value = '';
savePostsToDB();
renderPosts();
showNotification('Reply added successfully!', 'success');
}
}
}

function editPost(postId) {
const post = posts.find(p => p.id === postId);
if (post && post.author === currentUser) {
const newTitle = prompt('Edit title:', post.title);
const newContent = prompt('Edit content:', post.content);
if (newTitle && newContent && (newTitle !== post.title || newContent !== post.content)) {
// Create new version
const newVersion = {
...post,
title: newTitle,
content: newContent,
version: post.version + 1,
timestamp: new Date()
};
// Update post
const postIndex = posts.findIndex(p => p.id === postId);
posts[postIndex] = newVersion;
// Add to version history
postVersions[postId].unshift(newVersion);
savePostsToDB();
renderPosts();
showNotification('Post updated! Version history saved.', 'success');
}
}
}

function showVersionHistory(postId) {
const versions = postVersions[postId] || [];
const modal = document.getElementById('versionModal');
const historyContainer = document.getElementById('versionHistory');

historyContainer.innerHTML = '';

versions.forEach((version, index) => {
const versionDiv = document.createElement('div');
versionDiv.className = 'version-item';
versionDiv.innerHTML = `
<div class="version-header">
<span class="version-number">Version ${version.version}</span>
<span class="version-date">${formatTime(version.timestamp)}</span>
${index === 0 ? '<span class="current-version">Current</span>' : ''}
</div>
<div class="post-title">${version.title}</div>
<div class="post-content">${version.content}</div>
`;
historyContainer.appendChild(versionDiv);
});

modal.style.display = 'block';
}

function closeVersionModal() {
document.getElementById('versionModal').style.display = 'none';
}

// DELETE POST FUNCTIONALITY
function confirmDeletePost(postId) {
postToDelete = postId;
const post = posts.find(p => p.id === postId);
if (post) {
document.getElementById('confirmationMessage').innerHTML = `
Are you sure you want to delete your post?<br>
<strong>"${post.title}"</strong><br>
This action cannot be undone.
`;
document.getElementById('deleteConfirmationModal').style.display = 'block';
}
}

function closeDeleteModal() {
postToDelete = null;
document.getElementById('deleteConfirmationModal').style.display = 'none';
}

document.getElementById('confirmDeleteBtn').addEventListener('click', function() {
if (postToDelete !== null) {
deletePost(postToDelete);
closeDeleteModal();
}
});

function deletePost(postId) {
// Remove from posts array
const postIndex = posts.findIndex(p => p.id === postId);
if (postIndex !== -1) {
posts.splice(postIndex, 1);
}

// Remove from postVersions
delete postVersions[postId];

// Save to database
savePostsToDB();

// Update post count
updatePostCount();

// Re-render posts
renderPosts();

showNotification('Post deleted successfully.', 'success');
}

function openPrivateChat(username) {
document.getElementById('chatUserName').textContent = `Chat with ${username}`;
document.getElementById('chatModal').style.display = 'block';
}

function closeChatModal() {
document.getElementById('chatModal').style.display = 'none';
}

function sendChatMessage() {
const input = document.getElementById('chatInput');
const message = input.value.trim();
if (message) {
addChatMessage(message, true);
input.value = '';
// Simulate response
setTimeout(() => {
addChatMessage("Thank you for reaching out. I appreciate you taking the time to connect. How are you feeling today?", false);
}, 1000);
}
}

function addChatMessage(message, isOwn) {
const container = document.getElementById('chatMessages');
const messageDiv = document.createElement('div');
messageDiv.className = `chat-message ${isOwn ? 'own' : ''}`;
messageDiv.innerHTML = `<div class="message-bubble">${message}</div>`;
container.appendChild(messageDiv);
container.scrollTop = container.scrollHeight;
}

function reportPost(postId) {
showNotification('Post reported to moderation team. Thank you for keeping our community safe.', 'info');
}

function updatePostCount() {
document.getElementById('postCount').textContent = posts.length;
}

function formatTime(date) {
const now = new Date();
const diff = Math.floor((now - date) / 1000);
if (diff < 60) return 'Just now';
if (diff < 3600) return `${Math.floor(diff / 60)} minutes ago`;
if (diff < 86400) return `${Math.floor(diff / 3600)} hours ago`;
return `${Math.floor(diff / 86400)} days ago`;
}

// Advanced AI Assistant
const aiToggle = document.getElementById('aiToggle');
const aiChatBox = document.getElementById('aiChatBox');
const aiMessages = document.getElementById('aiMessages');
const userInput = document.getElementById('userInput');
const sendBtn = document.getElementById('sendMessage');

// Toggle chat box
aiToggle.addEventListener('click', () => {
const isVisible = aiChatBox.style.display === 'flex';
aiChatBox.style.display = isVisible ? 'none' : 'flex';
if (!isVisible) {
userInput.focus();
}
});

// Send message functionality
sendBtn.addEventListener('click', sendAIMessage);
userInput.addEventListener('keypress', (e) => {
if (e.key === 'Enter' && !e.shiftKey) {
e.preventDefault();
sendAIMessage();
}
});

// Quick actions
document.querySelectorAll('.quick-action').forEach(action => {
action.addEventListener('click', (e) => {
const actionType = e.target.dataset.action;
handleQuickAction(actionType);
});
});

function sendAIMessage() {
const message = userInput.value.trim();
if (message && !isAIThinking) {
addAIMessage(message, 'user');
userInput.value = '';
sendBtn.disabled = true;
isAIThinking = true;

// Show typing indicator
showTypingIndicator();

// Process message and generate response
setTimeout(() => {
hideTypingIndicator();
const response = generateAdvancedAIResponse(message);
addAIMessage(response.text, 'ai');
if (response.actions) {
addQuickActions(response.actions);
}
sendBtn.disabled = false;
isAIThinking = false;
userInput.focus();
}, 1500 + Math.random() * 1000);
}
}

function addAIMessage(text, sender) {
const messageDiv = document.createElement('div');
messageDiv.classList.add('message');
messageDiv.classList.add(sender === 'user' ? 'user-message' : 'ai-message');
messageDiv.innerHTML = text;
aiMessages.appendChild(messageDiv);
aiMessages.scrollTop = aiMessages.scrollHeight;
}

function showTypingIndicator() {
const typingDiv = document.createElement('div');
typingDiv.classList.add('message', 'typing-indicator');
typingDiv.id = 'typing-indicator';
typingDiv.innerHTML = `
<div class="typing-dots">
<span></span><span></span><span></span>
</div>
`;
aiMessages.appendChild(typingDiv);
aiMessages.scrollTop = aiMessages.scrollHeight;
}

function hideTypingIndicator() {
const typingIndicator = document.getElementById('typing-indicator');
if (typingIndicator) {
typingIndicator.remove();
}
}

function addQuickActions(actions) {
const actionsDiv = document.createElement('div');
actionsDiv.classList.add('quick-actions');
actionsDiv.innerHTML = actions.map(action => 
`<div class="quick-action" onclick="handleSuggestedAction('${action.type}')">${action.text}</div>`
).join('');
aiMessages.appendChild(actionsDiv);
aiMessages.scrollTop = aiMessages.scrollHeight;
}

function handleQuickAction(actionType) {
switch(actionType) {
case 'crisis':
addAIMessage('🆘 Crisis Help', 'user');
setTimeout(() => {
addAIMessage(`<strong>🚨 IMMEDIATE CRISIS SUPPORT 🚨</strong><br><br>
If you're having thoughts of self-harm or suicide, please reach out immediately:<br><br>
📞 <strong>988 Suicide & Crisis Lifeline</strong><br>
📱 <strong>Text HOME to 741741</strong><br>
🌍 <strong>International: +1-800-273-TALK</strong><br><br>
🏥 <strong>Emergency Services: 911</strong><br><br>
You are not alone. These services are available 24/7 and staffed by trained counselors who want to help you through this difficult time.`, 'ai');
}, 1000);
break;
case 'community':
addAIMessage('👥 Community Guide', 'user');
setTimeout(() => {
addAIMessage(`Welcome to our supportive community! Here's how to get started:<br><br>
✅ <strong>Share Your Story:</strong> Use the post form to share your experiences<br>
🔄 <strong>Version Control:</strong> Edit your posts anytime - we keep a history<br>
💬 <strong>Connect:</strong> Reply to posts and send private messages<br>
⚠️ <strong>Trigger Warnings:</strong> Use them for sensitive content<br>
🛡️ <strong>Stay Safe:</strong> Report concerning content and follow guidelines<br><br>
Remember: Share from your own experience and be kind to others. We're all here to support each other! 🤗`, 'ai');
}, 1000);
break;
case 'resources':
addAIMessage('📚 Resources', 'user');
setTimeout(() => {
addAIMessage(`Here are valuable mental health resources:<br><br>
🧠 <strong>Mental Health:</strong><br>
• NAMI (National Alliance on Mental Illness)<br>
• Psychology Today therapist finder<br>
• Mindfulness and meditation apps<br><br>
📞 <strong>Support Lines:</strong><br>
• Crisis Text Line: Text HOME to 741741<br>
• SAMHSA National Helpline: 1-800-662-4357<br><br>
🏥 <strong>Professional Help:</strong><br>
• Contact: 224173@ais.edu.hk<br>
• Phone: 5958 2902<br>
• Hours: Mon-Fri 9am-6pm, Sat 10am-4pm`, 'ai');
}, 1000);
break;
case 'anonymous':
addAIMessage('🔒 Anonymous Support', 'user');
setTimeout(() => {
addAIMessage(`Your privacy and safety are our top priorities:<br><br>
🔒 <strong>Anonymous Posting:</strong> Use any name you prefer<br>
🛡️ <strong>No Personal Info Required:</strong> Share only what you're comfortable with<br>
👁️ <strong>Content Moderation:</strong> All posts reviewed for safety<br>
🚫 <strong>No Judgment Zone:</strong> We enforce strict anti-harassment policies<br><br>
You can participate in our community while maintaining complete anonymity. Your mental health journey is yours to share as much or as little as you choose. 💙`, 'ai');
}, 1000);
break;
}
}

function generateAdvancedAIResponse(message) {
const lowerMsg = message.toLowerCase();

// Crisis detection - highest priority
const crisisKeywords = ['suicide', 'kill myself', 'end it all', 'want to die', 'harm myself', 'can\'t go on', 'no hope'];
if (crisisKeywords.some(keyword => lowerMsg.includes(keyword))) {
return {
text: `<strong>🚨 I'm very concerned about you right now.</strong><br><br>
Please reach out for immediate help:<br>
📞 <strong>Call 988 (Suicide & Crisis Lifeline)</strong><br>
📱 <strong>Text HOME to 741741</strong><br>
🏥 <strong>Or call 911 for emergency services</strong><br><br>
You matter, and there are people who want to help you through this. Please don't face this alone. 💙`,
actions: [
{type: 'crisis', text: '🆘 More Crisis Resources'},
{type: 'professional', text: '👨‍⚕️ Professional Help'}
]
};
}

// Anxiety/Depression support
if (lowerMsg.includes('anxious') || lowerMsg.includes('anxiety') || lowerMsg.includes('panic')) {
return {
text: `I understand anxiety can be overwhelming. Here are some immediate coping strategies:<br><br>
🌬️ <strong>Deep Breathing:</strong> 4-7-8 technique (inhale 4, hold 7, exhale 8)<br>
🧘 <strong>Grounding:</strong> Name 5 things you see, 4 you hear, 3 you touch<br>
💪 <strong>Progressive Muscle Relaxation:</strong> Tense and release muscle groups<br><br>
Remember: Anxiety is treatable, and you're taking a brave step by reaching out. 🤗`,
actions: [
{type: 'breathing', text: '🌬️ Breathing Exercise'},
{type: 'community', text: '👥 Connect with Others'},
{type: 'resources', text: '📚 Anxiety Resources'}
]
};
}

if (lowerMsg.includes('depressed') || lowerMsg.includes('depression') || lowerMsg.includes('sad')) {
return {
text: `I hear you, and I want you to know that what you're feeling is valid. Depression is challenging, but you're not alone:<br><br>
☀️ <strong>Small Steps Count:</strong> Even tiny accomplishments matter<br>
🤝 <strong>Reach Out:</strong> Connect with friends, family, or our community<br>
🏃 <strong>Gentle Movement:</strong> Even a short walk can help<br>
😴 <strong>Sleep & Nutrition:</strong> Basic self-care is important<br><br>
Consider speaking with a mental health professional. You deserve support and healing. 💙`,
actions: [
{type: 'community', text: '👥 Community Support'},
{type: 'resources', text: '📞 Professional Help'},
{type: 'selfcare', text: '🌱 Self-Care Tips'}
]
};
}

// Community questions
if (lowerMsg.includes('how to post') || lowerMsg.includes('community') || lowerMsg.includes('forum')) {
return {
text: `Great question! Here's how to participate in our community:<br><br>
📝 <strong>Create Posts:</strong> Use the form below to share your experiences<br>
🔄 <strong>Edit Safely:</strong> All edits are version-controlled<br>
💬 <strong>Reply & Support:</strong> Engage with others' posts<br>
💌 <strong>Private Messages:</strong> Connect directly with other members<br><br>
Your story could help someone else feel less alone. What would you like to share? 🌟`,
actions: [
{type: 'post-guide', text: '📝 Posting Guide'},
{type: 'guidelines', text: '📋 Community Rules'}
]
};
}

// Medication/therapy questions
if (lowerMsg.includes('medication') || lowerMsg.includes('therapy') || lowerMsg.includes('therapist')) {
return {
text: `These are important questions about professional treatment:<br><br>
👨‍⚕️ <strong>Professional Guidance:</strong> Only qualified healthcare providers should advise on medication or therapy<br>
🔍 <strong>Finding Help:</strong> Psychology Today and our resources can help you find local providers<br>
💰 <strong>Insurance/Cost:</strong> Many insurance plans cover mental health services<br><br>
Our community can share experiences, but please consult professionals for medical advice. You can contact our support team at 224173@ais.edu.hk for guidance on finding help.`,
actions: [
{type: 'resources', text: '📚 Professional Resources'},
{type: 'insurance', text: '💰 Cost & Insurance Info'}
]
};
}

// Loneliness/isolation
if (lowerMsg.includes('lonely') || lowerMsg.includes('alone') || lowerMsg.includes('isolated')) {
return {
text: `Feeling lonely is incredibly difficult, and I'm glad you reached out. You've already taken a brave step:<br><br>
👥 <strong>You're Not Alone:</strong> Our community of 127+ members understands<br>
💬 <strong>Start Small:</strong> Even one reply in our forum creates connection<br>
📱 <strong>Virtual Support:</strong> Online connections can be just as meaningful<br>
🤝 <strong>Local Resources:</strong> We can help you find local support groups<br><br>
Loneliness is temporary, even when it doesn't feel that way. 🌟`,
actions: [
{type: 'community', text: '👥 Join Community'},
{type: 'chat', text: '💬 Start a Conversation'},
{type: 'local', text: '📍 Local Support Groups'}
]
};
}

// General greetings and support
if (lowerMsg.includes('hello') || lowerMsg.includes('hi') || lowerMsg.includes('hey')) {
return {
text: `Hello! Welcome to MindSupport. I'm here to provide compassionate, informed support for your mental health journey. 🤗<br><br>
How are you feeling today? I can help with:<br>
• Crisis support and resources<br>
• Community guidance<br>
• Mental health information<br>
• Connecting you with professional help<br><br>
What would be most helpful for you right now?`,
actions: [
{type: 'crisis', text: '🆘 Crisis Support'},
{type: 'community', text: '👥 Community Help'},
{type: 'resources', text: '📚 Resources'},
{type: 'anonymous', text: '🔒 Anonymous Chat'}
]
};
}

// Default empathetic response
const responses = [
"Thank you for sharing with me. Your feelings are valid, and I'm here to support you. Can you tell me more about what's on your mind?",
"I hear you, and I want you to know that reaching out shows real strength. What kind of support would be most helpful right now?",
"It sounds like you're going through something difficult. Our community and resources are here for you. How can I best help today?",
"I appreciate you trusting me with this. Mental health challenges are real, and you deserve support. What would feel most supportive right now?"
];

return {
text: responses[Math.floor(Math.random() * responses.length)],
actions: [
{type: 'crisis', text: '🆘 Crisis Help'},
{type: 'community', text: '👥 Community Support'},
{type: 'resources', text: '📚 Mental Health Resources'}
]
};
}

function handleSuggestedAction(actionType) {
// Handle suggested actions from AI responses
switch(actionType) {
case 'breathing':
addAIMessage('🌬️ Breathing Exercise', 'user');
setTimeout(() => {
addAIMessage(`Let's do a calming breathing exercise together:<br><br>
<strong>4-7-8 Breathing Technique:</strong><br>
1️⃣ <strong>Inhale</strong> through your nose for 4 counts<br>
2️⃣ <strong>Hold</strong> your breath for 7 counts<br>
3️⃣ <strong>Exhale</strong> through your mouth for 8 counts<br><br>
Repeat this 3-4 times. Take your time and focus on the counting. You're doing great! 🌟`, 'ai');
}, 1000);
break;
case 'selfcare':
addAIMessage('🌱 Self-Care Tips', 'user');
setTimeout(() => {
addAIMessage(`Here are gentle self-care ideas for difficult days:<br><br>
🛁 <strong>Comfort:</strong> Warm bath, cozy blanket, favorite tea<br>
🎵 <strong>Sensory:</strong> Calming music, nature sounds, aromatherapy<br>
📱 <strong>Connection:</strong> Text a friend, pet an animal, join our community<br>
🌿 <strong>Nature:</strong> Step outside, tend to a plant, watch the sky<br>
📝 <strong>Expression:</strong> Journal, draw, or share in our forum<br><br>
Self-care isn't selfish - it's necessary. Start with what feels manageable today. 💚`, 'ai');
}, 1000);
break;
default:
handleQuickAction(actionType);
}
}

// Notification system
function showNotification(message, type = 'info') {
const notification = document.createElement('div');
notification.style.cssText = `
position: fixed;
top: 20px;
right: 20px;
z-index: 3000;
padding: 15px 20px;
border-radius: 8px;
color: white;
font-weight: 500;
box-shadow: 0 5px 15px rgba(0,0,0,0.3);
animation: slideIn 0.3s ease;
max-width: 300px;
`;

switch(type) {
case 'success':
notification.style.background = 'linear-gradient(135deg, #2ecc71, #27ae60)';
break;
case 'error':
notification.style.background = 'linear-gradient(135deg, #e74c3c, #c0392b)';
break;
default:
notification.style.background = 'linear-gradient(135deg, #3498db, #2980b9)';
}

notification.innerHTML = `
<div style="display: flex; align-items: center; gap: 10px;">
<i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-exclamation-circle' : 'fa-info-circle'}"></i>
${message}
</div>
`;

document.body.appendChild(notification);

setTimeout(() => {
notification.style.animation = 'slideOut 0.3s ease';
setTimeout(() => notification.remove(), 300);
}, 3000);
}

// Smooth scrolling
document.querySelectorAll('a[href^="#"]').forEach(anchor => {
anchor.addEventListener('click', function(e) {
e.preventDefault();
const target = document.querySelector(this.getAttribute('href'));
if (target) {
target.scrollIntoView({ behavior: 'smooth', block: 'start' });
aiChatBox.style.display = 'none';
}
});
});

// Close modals when clicking outside
window.addEventListener('click', function(e) {
const versionModal = document.getElementById('versionModal');
const chatModal = document.getElementById('chatModal');
const deleteModal = document.getElementById('deleteConfirmationModal');

if (e.target === versionModal) {
closeVersionModal();
}
if (e.target === chatModal) {
closeChatModal();
}
if (e.target === deleteModal) {
closeDeleteModal();
}
});

// Initialize
document.addEventListener('DOMContentLoaded', function() {
// Initialize IndexedDB
initDB().then((success) => {
if (success) {
console.log('Database initialized successfully with persistent storage');
} else {
console.log('Using fallback mode with sample data');
}
});

// Animation on scroll
const observerOptions = {
root: null,
rootMargin: '0px',
threshold: 0.1
};

const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
entry.target.style.opacity = '1';
entry.target.style.transform = 'translateY(0)';
}
});
}, observerOptions);

document.querySelectorAll('.policy-card, .contact-info').forEach(el => {
el.style.opacity = '0';
el.style.transform = 'translateY(20px)';
el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
observer.observe(el);
});

// Show welcome message after delay
setTimeout(() => {
showNotification('Welcome to MindSupport! Posts now persist after refresh and are shared with all users.', 'info');
}, 2000);
});

// Add CSS animations
const style = document.createElement('style');
style.textContent = `
@keyframes slideIn {
from { transform: translateX(100%); opacity: 0; }
to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
from { transform: translateX(0); opacity: 1; }
to { transform: translateX(100%); opacity: 0; }
}
`;
document.head.appendChild(style);
</script>
</body>
</html>
